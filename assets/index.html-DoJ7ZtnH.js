import{_ as l,c as o,a as n,d as c,b as i,f as e,r as d,o as p,e as s}from"./app-lSJJfXGm.js";const u="/assets/1-ZzUeF604.png",r="/assets/2-DBWQ7eYC.png",m="/assets/3-CzcwCep3.png",v="/assets/4-DNTbnmDA.png",h="/assets/5-CNoi5czW.png",g={},b={class:"table-of-contents"};function f(w,a){const t=d("router-link");return p(),o("div",null,[n("nav",b,[n("ul",null,[n("li",null,[i(t,{to:"#最近任务栏特性"},{default:e(()=>a[0]||(a[0]=[s("最近任务栏特性")])),_:1})]),n("li",null,[i(t,{to:"#看看activity跳转"},{default:e(()=>a[1]||(a[1]=[s("看看activity跳转：")])),_:1})]),n("li",null,[i(t,{to:"#看看-manifest"},{default:e(()=>a[2]||(a[2]=[s("看看 manifest")])),_:1})]),n("li",null,[i(t,{to:"#单应用多窗"},{default:e(()=>a[3]||(a[3]=[s("单应用多窗")])),_:1})]),n("li",null,[i(t,{to:"#在自己应用中实现"},{default:e(()=>a[4]||(a[4]=[s("在自己应用中实现")])),_:1})])])]),a[5]||(a[5]=c('<h2 id="最近任务栏特性" tabindex="-1"><a class="header-anchor" href="#最近任务栏特性"><span>最近任务栏特性</span></a></h2><p>打开两个窗口（比如进入wps，再打开一个文档）时，华为（以我平板的鸿蒙4.0为例）最近任务栏里，右上角会显示数字，点开之后可以查看已启动的全部wps相关进程，并且可以再创建一个wps主界面</p><p><img src="'+u+'" alt="图1"><img src="'+r+`" alt="图2"></p><p>去play商店下了wps office，包名和华为应用商店的相同，但是没有这个功能， 华为商店下的传到小米miui10上也没有这个功能</p><h2 id="看看activity跳转" tabindex="-1"><a class="header-anchor" href="#看看activity跳转"><span>看看activity跳转：</span></a></h2><p>普通应用：</p><p>切换到最近任务栏：</p><ul><li>com.huawei.android.launcher.unihome.UniHomeLauncher</li></ul><p>切换回应用：</p><ul><li>先是 com.tencent.mobileqq.mini.appbrand.ui.AppBrandUI</li><li>然后 com.huawei.android.launcher.unihome.UniHomeLauncher</li></ul><p>wps office</p><ul><li>启动第一个主界面，是cn.wps.moffice.main.local.home.PadHomeActivity</li><li>打开一个pdf，是cn.wps.moffice.pdf.multiactivity.PDFReader1</li><li>从最近任务新建一个主界面，是cn.wps.office.main.local.home.SubEntryPadHomeActivity</li></ul><h2 id="看看-manifest" tabindex="-1"><a class="header-anchor" href="#看看-manifest"><span>看看 manifest</span></a></h2><p>搜索关键字huawei 看到一些权限</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&lt;meta-data android:name=&quot;com.huawei.android.quickaction.quick_action_service&quot; android:value=&quot;cn.wps.moffice.main.HWQuickActionService&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.huawei.android.multiwindow.multiinstance.targetactivity&quot; android:value=&quot;cn.wps.moffice.main.local.SubEntryActivity&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.hihonor.android.multiwindow.multiinstance.targetactivity&quot; android:value=&quot;cn.wps.moffice.main.local.SubEntryActivity&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.samsung.android.multiwindow.activity.alias.targetactivity&quot; android:value=&quot;cn.wps.moffice.main.local.SubEntryActivity&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.vivo.android.multiwindow.multiinstance.targetactivity&quot; android:value=&quot;cn.wps.moffice.main.local.SubEntryActivity&quot;/&gt;</span>
<span class="line"></span>
<span class="line">&lt;meta-data android:name=&quot;com.huawei.android.multiwindow.multiinstance.enable&quot; android:value=&quot;true&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.huawei.android.multiwindow.multiinstance.level&quot; android:value=&quot;1&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.hihonor.android.multiwindow.multiinstance.enable&quot; android:value=&quot;true&quot;/&gt;</span>
<span class="line">&lt;meta-data android:name=&quot;com.hihonor.android.multiwindow.multiinstance.level&quot; android:value=&quot;1&quot;/&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看来是适配了华为，荣耀，三星，vivo？ 它这个<code>cn.wps.moffice.main.local.SubEntryActivity</code>已经和刚才新建的<code>SubEntryPadHomeActivity</code>很接近了，点开一看，就是根据屏幕尺寸选择启动手机或者平板activity</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">if (DisplayUtil.P0(this)) {</span>
<span class="line">	intent = new Intent(this, SubEntryPadHomeActivity.class);</span>
<span class="line">} else {</span>
<span class="line">	intent.setClass(this, SubEntryHomeRootActivity.class);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过这个好像只是支持基本的支持多实例？</p><hr><h2 id="单应用多窗" tabindex="-1"><a class="header-anchor" href="#单应用多窗"><span>单应用多窗</span></a></h2><p>在华为开发者文档中看到了一个提到这个的东西 https://developer.huawei.com/consumer/cn/doc/other/split_screen-0000001295870461#section1985mcpsimp</p><p><code>目前仅部分支持多实例的应用可以单应用分屏，通过侧边栏触发分屏时，使用应用的图标颜色来帮助判断，该应用是否支持单应用分屏</code> 也就是说如果app启动着的时候，拉出小窗侧栏，侧栏里的该图标还是亮着的就说明支持单应用分屏。由此发现华为自带的备忘录也支持这个功能。</p><p><img src="`+m+`" alt="图3"></p><h2 id="在自己应用中实现" tabindex="-1"><a class="header-anchor" href="#在自己应用中实现"><span>在自己应用中实现</span></a></h2><p>根据上面的文档说明，经简单测试，发现主要就是这句 （当然根据文档说明，还要保证 activity不能配置singleTask和singleInstance标记）</p><p>写在application标签下，和activity并列。</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span></span>
<span class="line">   <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.huawei.android.multiwindow.multiinstance.enable<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>meta-data</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以显示实例个数，但是点开发现没有新建的选项，不知道新建的怎么添加。</p><p><img src="`+v+'" alt="图4"></p><p><img src="'+h+'" alt="图5"></p>',30))])}const y=l(g,[["render",f],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/blogs/2023/winter/huaweiMultiInstance/","title":"华为(鸿蒙4.0)最近任务中应用右上角显示启动实例个数，可点击查看或新建","lang":"zh-CN","frontmatter":{"date":"2024-1-22 21:07:30","title":"华为(鸿蒙4.0)最近任务中应用右上角显示启动实例个数，可点击查看或新建","categories":["android"],"tags":["最近任务"]},"headers":[{"level":2,"title":"最近任务栏特性","slug":"最近任务栏特性","link":"#最近任务栏特性","children":[]},{"level":2,"title":"看看activity跳转：","slug":"看看activity跳转","link":"#看看activity跳转","children":[]},{"level":2,"title":"看看 manifest","slug":"看看-manifest","link":"#看看-manifest","children":[]},{"level":2,"title":"单应用多窗","slug":"单应用多窗","link":"#单应用多窗","children":[]},{"level":2,"title":"在自己应用中实现","slug":"在自己应用中实现","link":"#在自己应用中实现","children":[]}],"git":{"createdTime":1706420854000,"updatedTime":1730551436000,"contributors":[{"name":"ewt45","email":"79033456+ewt45@users.noreply.github.com","commits":2}]},"filePathRelative":"blogs/2023/winter/huaweiMultiInstance/index.md"}');export{y as comp,k as data};
