import{v as C}from"./ToolFilter-B32drc-T.js";import{A as V,f as B,a as P}from"./ActionInfo-B23WMb5r.js";import j from"./IconYt-D_vP9lhp.js";import M from"./IconBili-CMtoYxHz.js";import Y from"./IconInfo-D1wXkJcd.js";import E from"./IconSub-D5TM9A67.js";import N from"./ActionDialog-CVwUbXiR.js";import T from"./ActionYt-CrnOPkTb.js";import F from"./ActionBili-Czh0m-6-.js";import O from"./ActionSub-Pfdqagrq.js";import U from"./ToolMenus-yA0GO2Nj.js";import{g as q,h as u,i as K,j as L,E as W,p as G,_ as H,r as c,k as s,o as n,f as a,b as i,a as _,c as w,F as x,l as D,e as z,t as y,m as S,n as J}from"./app-lSJJfXGm.js";import"./ToolInfoLink-DOCFQvn0.js";import"./ToolDarkMode-9w8ghlWD.js";const Q=q({__name:"PokopeaMain",setup(A,{expose:m}){m();const d=u({orignal:[],filtered:[]}),e=o=>{d.value.filtered=o};G(C,{videos:d,updateVideos:e});const h=u(1),g=u(8),l=u({visible:!1,type:"Yt",videoData:{}}),f=[{name:"Yt",iconComp:j},{name:"Bili",iconComp:M},{name:"Sub",iconComp:E},{name:"Info",iconComp:Y}],k=K(()=>{const o=(h.value-1)*g.value,r=o+g.value;return d.value.filtered.slice(o,r)});let p=u("default");const I=(o,r)=>{l.value.visible=!l.value.visible,l.value.videoData=r,l.value.type=o},b=(o,r)=>o.name==="Bili"?!!(r.zh&&r.zh.length>0):!0,v=async()=>{try{const o=await fetch("/ppk/videos.json");if(!o.ok)throw new Error("无法加载视频数据");const r=await o.json();d.value.orignal=Object.values(r),d.value.filtered=[...d.value.orignal]}catch(o){W.error(o.message||"加载视频数据失败")}};L(async()=>{v(),p.value=window&&window.innerWidth<768?"small":"default"});const t={videos:d,updateVideos:e,currentPage:h,pageSize:g,dialogInfo:l,cardActions:f,paginatedVideos:k,get paginationSize(){return p},set paginationSize(o){p=o},card_action_click:I,is_card_action_display:b,fetchVideos:v,get formatDate(){return P},get formatDuration(){return B},ActionDialog:N,ActionYt:T,ActionBili:F,ActionSub:O,ActionInfo:V,ToolMenus:U};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),R={class:"card-img-wrapper"},X=["src"],Z={class:"card-img-bottom-shadow"},$={style:{padding:"6px 6px 0px 6px"}},ee=["title"],oe={class:"width-center"};function te(A,m,d,e,h,g){const l=c("el-col"),f=c("el-row"),k=c("el-text"),p=c("el-card"),I=c("el-skeleton"),b=c("el-pagination"),v=c("el-space");return n(),s(v,{fill:"",direction:"vertical",size:24,alignment:"center",style:{width:"100%",padding:"10px"}},{default:a(()=>[i(e.ToolMenus),i(I,{rows:5,animated:"",loading:e.videos.orignal.length===0,throttle:{leading:500,initVal:!0}},{default:a(()=>[i(f,{gutter:8,class:"video-list"},{default:a(()=>[(n(!0),w(x,null,D(e.paginatedVideos,t=>(n(),s(l,{xs:12,sm:12,md:8,lg:6,style:{"padding-bottom":"8px"},key:t.video_id},{default:a(()=>[i(p,{shadow:"hover"},{footer:a(()=>[i(f,{class:"card-footer"},{default:a(()=>[(n(),w(x,null,D(e.cardActions,o=>(n(),w(x,{key:o.name},[e.is_card_action_display(o,t)?(n(),s(l,{key:0,span:6,onClick:r=>e.card_action_click(o.name,t)},{default:a(()=>[(n(),s(J(o.iconComp)))]),_:2},1032,["onClick"])):S("",!0)],64))),64))]),_:2},1024)]),default:a(()=>[_("div",R,[_("img",{src:`https://i.ytimg.com/vi/${t.video_id}/mqdefault.jpg`,alt:"thumbnail",loading:"lazy"},null,8,X),_("div",Z,[i(f,null,{default:a(()=>[i(l,{span:12},{default:a(()=>[z(y(e.formatDate(t.published_at)),1)]),_:2},1024),i(l,{span:12,style:{"text-align":"end"}},{default:a(()=>[z(y(e.formatDuration(t.duration)),1)]),_:2},1024)]),_:2},1024)])]),_("div",$,[_("h3",{title:t.title},y(t.title),9,ee),i(k,{size:"small","line-clamp":"1",truncated:""},{default:a(()=>[z(y(t.channel_title),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["loading"]),_("div",oe,[i(b,{"current-page":e.currentPage,"onUpdate:currentPage":m[0]||(m[0]=t=>e.currentPage=t),"page-size":e.pageSize,total:e.videos.filtered.length,layout:"pager","pager-count":5,background:"",size:e.paginationSize},null,8,["current-page","page-size","total","size"])]),i(e.ActionDialog,{modelValue:e.dialogInfo.visible,"onUpdate:modelValue":m[1]||(m[1]=t=>e.dialogInfo.visible=t)},{default:a(()=>[e.dialogInfo.type==="Yt"?(n(),s(e.ActionYt,{key:0,video_id:e.dialogInfo.videoData.video_id},null,8,["video_id"])):e.dialogInfo.type==="Bili"?(n(),s(e.ActionBili,{key:1,video_list:e.dialogInfo.videoData.zh},null,8,["video_list"])):e.dialogInfo.type==="Sub"?(n(),s(e.ActionSub,{key:2,video:e.dialogInfo.videoData},null,8,["video"])):e.dialogInfo.type==="Info"?(n(),s(e.ActionInfo,{key:3,video:e.dialogInfo.videoData},null,8,["video"])):S("",!0)]),_:1},8,["modelValue"])]),_:1})}const ve=H(Q,[["render",te],["__scopeId","data-v-0c062530"],["__file","PokopeaMain.vue"]]);export{ve as default};
