import{_ as o,c as d,a as n,d as c,b as l,f as t,e as a,r,o as p}from"./app-lSJJfXGm.js";const u="/assets/1-JwAGhqGT.png",m={},v={class:"table-of-contents"},b={href:"https://mt2.cn/guide/file/mt-syntax.html",target:"_blank",rel:"noopener noreferrer"},g={href:"https://developer.android.com/tools/logcat?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"};function h(x,e){const s=r("router-link"),i=r("ExternalLinkIcon");return p(),d("div",null,[n("nav",v,[n("ul",null,[n("li",null,[l(s,{to:"#前言"},{default:t(()=>e[0]||(e[0]=[a("前言")])),_:1})]),n("li",null,[l(s,{to:"#输出格式"},{default:t(()=>e[1]||(e[1]=[a("输出格式")])),_:1})]),n("li",null,[l(s,{to:"#匹配优先级之后的内容"},{default:t(()=>e[2]||(e[2]=[a("匹配优先级之后的内容")])),_:1})])])]),e[5]||(e[5]=n("h2",{id:"前言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前言"},[n("span",null,"前言")])],-1)),e[6]||(e[6]=n("p",null,"环境：使用logcat将日志存为文件后，用MT查看。",-1)),e[7]||(e[7]=n("p",null,"目标：想给logcat输出的日志高亮一下。主要就是给Error级别的高亮，方便查看报错。",-1)),e[8]||(e[8]=n("p",null,"参考：",-1)),n("ul",null,[n("li",null,[n("a",b,[e[3]||(e[3]=a("mt语法高亮官方文档")),l(i)])]),n("li",null,[n("a",g,[e[4]||(e[4]=a("谷歌logcat文档")),l(i)])])]),e[9]||(e[9]=c('<p>最终效果：<br><img src="'+u+`" alt="图1"></p><h2 id="输出格式" tabindex="-1"><a class="header-anchor" href="#输出格式"><span>输出格式</span></a></h2><p>有好几种 https://developer.android.com/tools/logcat?hl=zh-cn#outputFormat</p><p>通过 <code>-v</code> 指定，默认是<code>threadtime</code><br> 格式为：显示日期、调用时间、优先级、标签、PID 以及发出消息的线程的 TID。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">05-14 11:06:01.491  2328  4244 D WindowManager: WS setWallpaperScale return, wallpaper no need to recover</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>brief</code> 是这样的。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">V/HwWifiServiceFactory( 2328): get AllImpl object = com.android.server.wifi.HwWifiServiceFactoryImpl@f384251</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>还可能有这种，提示进程启动或结束的<br><code>--------- beginning of crash</code></p><p>要不就先适配threadtime吧</p><p><strong>格式修饰符</strong><br> https://developer.android.com/tools/logcat?hl=zh-cn#formatmodify <br> 比如以不同格式显示日期啥的。就先默认的吧，啥也不加的</p><h2 id="匹配优先级之后的内容" tabindex="-1"><a class="header-anchor" href="#匹配优先级之后的内容"><span>匹配优先级之后的内容</span></a></h2><p>优先级有：</p><ul><li>V：详细（最低优先级）</li><li>D：调试</li><li>I：信息</li><li>W：警告</li><li>E：错误</li><li>F：严重错误</li><li>S：静默（最高优先级，绝不会输出任何内容）</li></ul><p>使用到的正则为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">/(?&lt;=.*?)\\b(?:E|F)\\b.*/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>解释：</p><ul><li><code>.*?</code> 匹配优先级字母前的所有内容。</li><li><code>(?&lt;=pattern)内容</code>返回符合pattern的后面的内容，不包含pattern。</li><li><code>\\b</code>匹配单词边界</li><li><code>(?:E|F)</code> 匹配优先级E或F，但不存储结果。也就是说和其他匹配内容合并在一起。</li><li><code>.*</code> 匹配任意字符（除换行外）零次或多次</li></ul><p>例如一行文字为<br><code>05-14 11:06:01.491 2328 4244 D WindowManager: WS setWallpaperScale return, wallpaper no need to recover</code></p><p>匹配后返回的结果就是<br><code> D WindowManager: WS setWallpaperScale return, wallpaper no need to recover</code></p><p>经过一番颜色测试，最终完成。修改后缀为mtsx，点击即可安装。安装后自动对txt和logcat后缀的文件进行高亮。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">{</span>
<span class="line">    name: [&quot;Logcat&quot;, &quot;.txt&quot;,&quot;.logcat&quot;]</span>
<span class="line">    colors: [</span>
<span class="line">        &quot;info&quot;, #80b06d, #80b06d</span>
<span class="line">        &quot;debug&quot;, #4874a0, #4874a0</span>
<span class="line">        &quot;warn&quot;, #a79652, #a79652</span>
<span class="line">        &quot;error&quot;, #bc3f3c, #bc3f3c</span>
<span class="line">    ]</span>
<span class="line">    comment: {startsWith: &quot;//&quot;}</span>
<span class="line">    contains: [</span>
<span class="line"></span>
<span class="line">        {match: /(?&lt;=.*?)\\b(?:D)\\b.*/, 0: &quot;debug&quot;}</span>
<span class="line">        {match: /(?&lt;=.*?)\\b(?:I)\\b.*/, 0: &quot;info&quot;}</span>
<span class="line">        {match: /(?&lt;=.*?)\\b(?:W)\\b.*/, 0: &quot;warn&quot;}</span>
<span class="line">        {match: /(?&lt;=.*?)\\b(?:E|F)\\b.*/, 0: &quot;error&quot;}</span>
<span class="line">    ]</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21))])}const q=o(m,[["render",h],["__file","index.html.vue"]]),w=JSON.parse('{"path":"/blogs/2024/05/logcatMTSyntax/","title":"简易MT语法高亮 Logcat日志","lang":"zh-CN","frontmatter":{"date":"2024-5-20 20:15:35","title":"简易MT语法高亮 Logcat日志","categories":["android"],"tags":["mt管理器","语法高亮","正则表达式"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"输出格式","slug":"输出格式","link":"#输出格式","children":[]},{"level":2,"title":"匹配优先级之后的内容","slug":"匹配优先级之后的内容","link":"#匹配优先级之后的内容","children":[]}],"git":{"createdTime":1716216037000,"updatedTime":1716216037000,"contributors":[{"name":"ewt45","email":"79033456+ewt45@users.noreply.github.com","commits":1}]},"filePathRelative":"blogs/2024/05/logcatMTSyntax/index.md"}');export{q as comp,w as data};
