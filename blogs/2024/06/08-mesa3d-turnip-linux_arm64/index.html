<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>编译安卓PRoot用的turnip（linux_arm64架构） | 博客</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-BnPP2NeH.css" as="style"><link rel="stylesheet" href="/assets/style-BnPP2NeH.css">
    <link rel="modulepreload" href="/assets/app-lSJJfXGm.js"><link rel="modulepreload" href="/assets/index.html-DD-LFEVB.js">
    <link rel="prefetch" href="/assets/timeline.html-BAvVtoBI.js" as="script"><link rel="prefetch" href="/assets/posts.html-BDe9RmJC.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-5V_0ldeR.js" as="script"><link rel="prefetch" href="/assets/1.html-yy2yFytV.js" as="script"><link rel="prefetch" href="/assets/1.html-nTxjU1Bc.js" as="script"><link rel="prefetch" href="/assets/2.html-DZ-3w1VZ.js" as="script"><link rel="prefetch" href="/assets/3.html-DZ3bEvhb.js" as="script"><link rel="prefetch" href="/assets/1.html-ZRhaUqLX.js" as="script"><link rel="prefetch" href="/assets/1.html-Dw8_-m24.js" as="script"><link rel="prefetch" href="/assets/1.html-D2p--ZRn.js" as="script"><link rel="prefetch" href="/assets/1.html-BKcCMUG3.js" as="script"><link rel="prefetch" href="/assets/1.html-C6pQh-RC.js" as="script"><link rel="prefetch" href="/assets/1.html-CYKCRyI3.js" as="script"><link rel="prefetch" href="/assets/2.html-DJbJUUuj.js" as="script"><link rel="prefetch" href="/assets/1.html-B6B-juSh.js" as="script"><link rel="prefetch" href="/assets/1.html-v9pKxjgF.js" as="script"><link rel="prefetch" href="/assets/1.html-De7IlD7i.js" as="script"><link rel="prefetch" href="/assets/1.html-CHE8FBaR.js" as="script"><link rel="prefetch" href="/assets/1.html-RqMXOz5Q.js" as="script"><link rel="prefetch" href="/assets/1.html-Dof7uOmY.js" as="script"><link rel="prefetch" href="/assets/1.html-C5tNz7tA.js" as="script"><link rel="prefetch" href="/assets/1.html-CNMa2M-d.js" as="script"><link rel="prefetch" href="/assets/1.html-BoJFA7la.js" as="script"><link rel="prefetch" href="/assets/1.html-DK6IPxzw.js" as="script"><link rel="prefetch" href="/assets/1.html-BXhANdLw.js" as="script"><link rel="prefetch" href="/assets/1.html-BmUrsBLW.js" as="script"><link rel="prefetch" href="/assets/1.html-DNaqT86r.js" as="script"><link rel="prefetch" href="/assets/1.html-Dl0GJ-jH.js" as="script"><link rel="prefetch" href="/assets/1.html-yCcpQztl.js" as="script"><link rel="prefetch" href="/assets/1.html-DBv1IOaq.js" as="script"><link rel="prefetch" href="/assets/1.html-C0Zwxfqb.js" as="script"><link rel="prefetch" href="/assets/1.html-iVIhowxE.js" as="script"><link rel="prefetch" href="/assets/1.html-Bcnqkk_9.js" as="script"><link rel="prefetch" href="/assets/1.html-CYVqutMM.js" as="script"><link rel="prefetch" href="/assets/1.html-SDgp3aOs.js" as="script"><link rel="prefetch" href="/assets/1.html-B38hZpmE.js" as="script"><link rel="prefetch" href="/assets/1.html-C9q0qIEw.js" as="script"><link rel="prefetch" href="/assets/1.html-Bg9Js69h.js" as="script"><link rel="prefetch" href="/assets/2.html-eRtQpz5X.js" as="script"><link rel="prefetch" href="/assets/1.html-Dv_I2idE.js" as="script"><link rel="prefetch" href="/assets/1.html-Dn6C90gc.js" as="script"><link rel="prefetch" href="/assets/1.html-y1hVWCcl.js" as="script"><link rel="prefetch" href="/assets/1.html-BSQiaV1J.js" as="script"><link rel="prefetch" href="/assets/1.html-DXi2vSUl.js" as="script"><link rel="prefetch" href="/assets/1.html-Jgq6TbQK.js" as="script"><link rel="prefetch" href="/assets/1.html-CURNMHjC.js" as="script"><link rel="prefetch" href="/assets/1.html-CUfabN0R.js" as="script"><link rel="prefetch" href="/assets/1.html-ChhkJBFb.js" as="script"><link rel="prefetch" href="/assets/1.html-y8Il0XMP.js" as="script"><link rel="prefetch" href="/assets/1.html-CXBcIIjb.js" as="script"><link rel="prefetch" href="/assets/1.html-DEYIk8-q.js" as="script"><link rel="prefetch" href="/assets/1.html-CUB-76jf.js" as="script"><link rel="prefetch" href="/assets/1.html-BR-vtOCm.js" as="script"><link rel="prefetch" href="/assets/1.html-Di6IvUbD.js" as="script"><link rel="prefetch" href="/assets/1.html-iKeLMEA1.js" as="script"><link rel="prefetch" href="/assets/1.html-B23WFga2.js" as="script"><link rel="prefetch" href="/assets/1.html-DBAywDxx.js" as="script"><link rel="prefetch" href="/assets/1.html-C7gBBOTt.js" as="script"><link rel="prefetch" href="/assets/1.html-DtTuhNez.js" as="script"><link rel="prefetch" href="/assets/1.html-CjbxeMTY.js" as="script"><link rel="prefetch" href="/assets/1.html-VedXetm4.js" as="script"><link rel="prefetch" href="/assets/1.html-C7vkUq9U.js" as="script"><link rel="prefetch" href="/assets/1.html-CKoDS6cD.js" as="script"><link rel="prefetch" href="/assets/1.html-D2AjppoH.js" as="script"><link rel="prefetch" href="/assets/1.html-D6uas5Q5.js" as="script"><link rel="prefetch" href="/assets/1.html-DZaxw3Vt.js" as="script"><link rel="prefetch" href="/assets/1.html-Ciw9aOQK.js" as="script"><link rel="prefetch" href="/assets/2.html-Czvu1qhK.js" as="script"><link rel="prefetch" href="/assets/1.html-BL1u0BXg.js" as="script"><link rel="prefetch" href="/assets/1.html-DOrS_H42.js" as="script"><link rel="prefetch" href="/assets/1.html-D_-YFshT.js" as="script"><link rel="prefetch" href="/assets/1.html-C7oQNTeb.js" as="script"><link rel="prefetch" href="/assets/1.html-D6q7O-YE.js" as="script"><link rel="prefetch" href="/assets/1.html-BKtgxFao.js" as="script"><link rel="prefetch" href="/assets/1.html-ChHfA7Ub.js" as="script"><link rel="prefetch" href="/assets/1.html-BYmHK36B.js" as="script"><link rel="prefetch" href="/assets/1.html-kA591iPl.js" as="script"><link rel="prefetch" href="/assets/1.html-B6Z9JHUx.js" as="script"><link rel="prefetch" href="/assets/1.html-DeW5UuLV.js" as="script"><link rel="prefetch" href="/assets/1.html-Ly1Izu-z.js" as="script"><link rel="prefetch" href="/assets/1.html-D0dXHV11.js" as="script"><link rel="prefetch" href="/assets/1.html-CZ6hGlzj.js" as="script"><link rel="prefetch" href="/assets/1.html-CSl7qz7_.js" as="script"><link rel="prefetch" href="/assets/1.html-hoorisB2.js" as="script"><link rel="prefetch" href="/assets/1.html-DfMmJBkA.js" as="script"><link rel="prefetch" href="/assets/1.html-CvjQlPb-.js" as="script"><link rel="prefetch" href="/assets/1.html-mMwmaqNv.js" as="script"><link rel="prefetch" href="/assets/1.html-BbZEnfuL.js" as="script"><link rel="prefetch" href="/assets/1.html-DMy9vnUO.js" as="script"><link rel="prefetch" href="/assets/1.html-CaB-TTNA.js" as="script"><link rel="prefetch" href="/assets/1.html-DTTqmB1M.js" as="script"><link rel="prefetch" href="/assets/1.html-DG0Ri2-3.js" as="script"><link rel="prefetch" href="/assets/1.html-CbdOtFX6.js" as="script"><link rel="prefetch" href="/assets/1.html-BPggE-vd.js" as="script"><link rel="prefetch" href="/assets/1.html-HSH3YtDr.js" as="script"><link rel="prefetch" href="/assets/1.html-CblnYoQH.js" as="script"><link rel="prefetch" href="/assets/1.html-DW3jzJmF.js" as="script"><link rel="prefetch" href="/assets/1.html-EbscoznH.js" as="script"><link rel="prefetch" href="/assets/1.html-BVzHmXLV.js" as="script"><link rel="prefetch" href="/assets/1.html-ks4RjumV.js" as="script"><link rel="prefetch" href="/assets/1.html-BH1KfGMl.js" as="script"><link rel="prefetch" href="/assets/1.html-zPiztlwQ.js" as="script"><link rel="prefetch" href="/assets/1.html-DbQUkwnm.js" as="script"><link rel="prefetch" href="/assets/1.html-lC7lLhGV.js" as="script"><link rel="prefetch" href="/assets/1.html-CLYr7dtL.js" as="script"><link rel="prefetch" href="/assets/1.html-ojawvUMc.js" as="script"><link rel="prefetch" href="/assets/1.html-BZEAgw8b.js" as="script"><link rel="prefetch" href="/assets/1.html-DYCe7dPb.js" as="script"><link rel="prefetch" href="/assets/1.html-DTn0dGU2.js" as="script"><link rel="prefetch" href="/assets/1.html--B2a8o7V.js" as="script"><link rel="prefetch" href="/assets/1.html-7Ua1aPJo.js" as="script"><link rel="prefetch" href="/assets/1.html-Gj4i9rQj.js" as="script"><link rel="prefetch" href="/assets/1.html-BoZMEBVy.js" as="script"><link rel="prefetch" href="/assets/1.html-XU3T-WYT.js" as="script"><link rel="prefetch" href="/assets/1.html-D1V-fulj.js" as="script"><link rel="prefetch" href="/assets/1.html-pymXCC7r.js" as="script"><link rel="prefetch" href="/assets/2.html-Ubr6swgl.js" as="script"><link rel="prefetch" href="/assets/3.html-CjLKwczA.js" as="script"><link rel="prefetch" href="/assets/4.html-CZDmeODS.js" as="script"><link rel="prefetch" href="/assets/5.html-CvM0EXix.js" as="script"><link rel="prefetch" href="/assets/index.html-BBKCb86C.js" as="script"><link rel="prefetch" href="/assets/index.html-Cy-Y6qO0.js" as="script"><link rel="prefetch" href="/assets/index.html--IG5pKEw.js" as="script"><link rel="prefetch" href="/assets/index.html-D_zAtQ3A.js" as="script"><link rel="prefetch" href="/assets/index.html-QY7s6tas.js" as="script"><link rel="prefetch" href="/assets/index.html-DDwaHnCa.js" as="script"><link rel="prefetch" href="/assets/index.html-DgszJxPY.js" as="script"><link rel="prefetch" href="/assets/deprecated.html-CRMXFzvC.js" as="script"><link rel="prefetch" href="/assets/index.html-Rc_VX8bK.js" as="script"><link rel="prefetch" href="/assets/index_EN.html-ByFpT8Si.js" as="script"><link rel="prefetch" href="/assets/index.html-BuF_ye6e.js" as="script"><link rel="prefetch" href="/assets/index.html-DWAaArns.js" as="script"><link rel="prefetch" href="/assets/index.html-CqZrKvZ4.js" as="script"><link rel="prefetch" href="/assets/index.html-BdQrDGCb.js" as="script"><link rel="prefetch" href="/assets/index.html-DfEreS3A.js" as="script"><link rel="prefetch" href="/assets/index.html-xfauZgFa.js" as="script"><link rel="prefetch" href="/assets/index.html-CPq8pEd4.js" as="script"><link rel="prefetch" href="/assets/index.html-QR87e8Ls.js" as="script"><link rel="prefetch" href="/assets/detailed.html-CYf3qOPR.js" as="script"><link rel="prefetch" href="/assets/index.html-CQq5mgbv.js" as="script"><link rel="prefetch" href="/assets/index.html-BMQ4-iAy.js" as="script"><link rel="prefetch" href="/assets/index.html-B679GBm9.js" as="script"><link rel="prefetch" href="/assets/index.html-CCrvZbLJ.js" as="script"><link rel="prefetch" href="/assets/driveD.html-CcD-EJvX.js" as="script"><link rel="prefetch" href="/assets/index.html-BQuueml5.js" as="script"><link rel="prefetch" href="/assets/index.html-gEKDxyu6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bhz11Ob5.js" as="script"><link rel="prefetch" href="/assets/index.html-BkeY5tbW.js" as="script"><link rel="prefetch" href="/assets/index.html-Bvnzpb-9.js" as="script"><link rel="prefetch" href="/assets/index.html-DCAyTCDU.js" as="script"><link rel="prefetch" href="/assets/index.html-DkAhnggS.js" as="script"><link rel="prefetch" href="/assets/index.html-DFxQCUU9.js" as="script"><link rel="prefetch" href="/assets/index.html-9VL9SfQK.js" as="script"><link rel="prefetch" href="/assets/index.html-BlTTay7L.js" as="script"><link rel="prefetch" href="/assets/index.html-t5GXM772.js" as="script"><link rel="prefetch" href="/assets/index.html-CSlhuypt.js" as="script"><link rel="prefetch" href="/assets/index.html-C5jNpAm8.js" as="script"><link rel="prefetch" href="/assets/index.html-DjJMF_aD.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgv5WEvh.js" as="script"><link rel="prefetch" href="/assets/index.html-DBOL5oAg.js" as="script"><link rel="prefetch" href="/assets/index.html-CyMED2UU.js" as="script"><link rel="prefetch" href="/assets/index.html-Brt8k1u9.js" as="script"><link rel="prefetch" href="/assets/index.html-DTKB9h7D.js" as="script"><link rel="prefetch" href="/assets/index_en.html-BXYBFagB.js" as="script"><link rel="prefetch" href="/assets/index.html-C3TPFGWv.js" as="script"><link rel="prefetch" href="/assets/index.html-BEi31oBx.js" as="script"><link rel="prefetch" href="/assets/index.html-DQMJgohn.js" as="script"><link rel="prefetch" href="/assets/index.html-oa6BlAsi.js" as="script"><link rel="prefetch" href="/assets/index.html-C22QzVzY.js" as="script"><link rel="prefetch" href="/assets/index.html-DoJ7ZtnH.js" as="script"><link rel="prefetch" href="/assets/index.html-BGBq_6tl.js" as="script"><link rel="prefetch" href="/assets/index.html-De0w7Z4M.js" as="script"><link rel="prefetch" href="/assets/index.html-DPCBOMd7.js" as="script"><link rel="prefetch" href="/assets/404.html-BfWx50pL.js" as="script"><link rel="prefetch" href="/assets/Valine.min-Bnm5pcBZ.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-DWEKOTfS.js" as="script"><link rel="prefetch" href="/assets/PokopeaMain-MDrkiEMa.js" as="script"><link rel="prefetch" href="/assets/example-CYQHARbw.js" as="script"><link rel="prefetch" href="/assets/main-BTkXXdD8.js" as="script"><link rel="prefetch" href="/assets/ActionBili-Czh0m-6-.js" as="script"><link rel="prefetch" href="/assets/ActionDialog-CVwUbXiR.js" as="script"><link rel="prefetch" href="/assets/ActionInfo-B23WMb5r.js" as="script"><link rel="prefetch" href="/assets/ActionSub-Pfdqagrq.js" as="script"><link rel="prefetch" href="/assets/ActionYt-CrnOPkTb.js" as="script"><link rel="prefetch" href="/assets/IconBili-CMtoYxHz.js" as="script"><link rel="prefetch" href="/assets/IconInfo-D1wXkJcd.js" as="script"><link rel="prefetch" href="/assets/IconSub-D5TM9A67.js" as="script"><link rel="prefetch" href="/assets/IconYt-D_vP9lhp.js" as="script"><link rel="prefetch" href="/assets/ToolDarkMode-9w8ghlWD.js" as="script"><link rel="prefetch" href="/assets/ToolFilter-B32drc-T.js" as="script"><link rel="prefetch" href="/assets/ToolInfoLink-DOCFQvn0.js" as="script"><link rel="prefetch" href="/assets/ToolMenus-yA0GO2Nj.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-DfZWbE-_.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><!----><a href="/" class="site-name">博客</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><IconHome class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"></IconHome><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">编译安卓PRoot用的turnip（linux_arm64架构）</h1><div class="page-info"><!----><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2024-6-8 20:20:50<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/categories/android/1.html" class="">android</a><a href="/categories/jishu/1.html" class="">技术</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/tags/android/1.html" class="">android</a><a href="/tags/termux/1.html" class="">termux</a><a href="/tags/mesa/1.html" class="">mesa</a><a href="/tags/proot/1.html" class="">proot</a><a href="/tags/turnip/1.html" class="">turnip</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p><a href="https://docs.mesa3d.org/meson.html" target="_blank" rel="noopener noreferrer">mesa3d官网 编译说明<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_1-编译流程与结果测试" tabindex="-1"><a class="header-anchor" href="#_1-编译流程与结果测试"><span>1 编译流程与结果测试</span></a></h2><h3 id="_1-1-meson构建系统" tabindex="-1"><a class="header-anchor" href="#_1-1-meson构建系统"><span>1.1 meson构建系统</span></a></h3><p>mesa3d使用meson作为构建系统。其作用是检查编译环境/依赖是否符合条件，更改配置参数。</p><p>执行meson命令时一般都是在源码根目录下。</p><p><strong>生成一个基础的构建目录</strong><br><code>meson setup 构建目录</code></p><ul><li>构建目录用于保存本次构建的配置，编译后的文件也存在这里。</li><li>个构建目录彼此独立，互不干扰。</li></ul><p><strong>修改构建参数</strong><br><code>meson configure 构建目录 参数</code></p><ul><li>当构建目录已经存在时，想要修改参数可以使用<code>configure</code>。参数格式为<code>-Dkey=value</code>, <code>-D</code>后有没有空格都行。<code>value</code>中，数组的多个值用逗号隔开，空数组用中括号或啥也不写。</li><li>不带任何参数执行 <code>meson configure 构建目录</code> 即可查看全部可设置的参数及其当前值。旧版是直接打印全部内容然后退出。最新版mesa(24的)的话是需要手动按方向键往上下滚动显示，按<code>q</code>退出。</li></ul><p><strong>编译阶段</strong><br><code>ninja -C 构建目录 [install]</code></p><ul><li>这是真正开始编译了。</li><li>如果带<code>install</code>，就会在编译后将需要导出的文件安装到某个目录下，可以在配置阶段通过<code>-D prefix=</code>进行设置。</li></ul><h3 id="_1-2-turnip编译参数" tabindex="-1"><a class="header-anchor" href="#_1-2-turnip编译参数"><span>1.2 turnip编译参数</span></a></h3><p>根据alex的教程，参数大概长这样。编译时有1800多条。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">meson configure build-turnip/ <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">prefix</span><span class="token operator">=</span>/root/mesa <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">buildtype</span><span class="token operator">=</span>release <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">dri3</span><span class="token operator">=</span>enabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">egl</span><span class="token operator">=</span>enabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">platforms</span><span class="token operator">=</span>x11 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> gallium-drivers<span class="token operator">=</span>swrast,virgl,zink,freedreno <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> vulkan-drivers<span class="token operator">=</span>freedreno <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">opengl</span><span class="token operator">=</span>false <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">glx</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">osmesa</span><span class="token operator">=</span>true <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">gles1</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">gles2</span><span class="token operator">=</span>enabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">glvnd</span><span class="token operator">=</span>true <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">libunwind</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> shared-glapi<span class="token operator">=</span>enabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> microsoft-clc<span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">valgrind</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> freedreno-kmds<span class="token operator">=</span>kgsl</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>又自己精简了一下，变为1100多条。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">meson configure build-turnip/ <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">prefix</span><span class="token operator">=</span>/root/mesa <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">buildtype</span><span class="token operator">=</span>release <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">dri3</span><span class="token operator">=</span>enabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">platforms</span><span class="token operator">=</span>x11 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> gallium-drivers<span class="token operator">=</span>freedreno <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> vulkan-drivers<span class="token operator">=</span>freedreno <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> freedreno-kmds<span class="token operator">=</span>kgsl <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">opengl</span><span class="token operator">=</span>false <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">glx</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">osmesa</span><span class="token operator">=</span>false <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">egl</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">gles1</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">gles2</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">glvnd</span><span class="token operator">=</span>false <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">libunwind</span><span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> shared-glapi<span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> microsoft-clc<span class="token operator">=</span>disabled <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-D</span> <span class="token assign-left variable">valgrind</span><span class="token operator">=</span>disabled</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-编译成功后测试vulkan" tabindex="-1"><a class="header-anchor" href="#_1-3-编译成功后测试vulkan"><span>1.3 编译成功后测试vulkan</span></a></h3><p>两个环境变量。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">VK_ICD_FILENAMES</span><span class="token operator">=</span><span class="token variable">$prefix</span>/share/vulkan/icd.d/freedreno_icd.aarch64.json</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">MESA_VK_WSI_DEBUG</span><span class="token operator">=</span>sw</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>VK_ICD_FILENAMES</code> 用于指定vulkan类型。我们将其指定为freedreno，即turnip。 <ul><li>实际上这个已经被废弃了，推荐用的是<code>VK_DRIVER_FILES</code>，但不确定新的是什么时候加上的，所以还是先用旧的了。</li><li><code>$prefix</code>请替换为实际有意义的值。默认是<code>/usr</code>，但这个是全局生效的路径，所以一般在测试自己编译的文件时，会在配置构建阶段 通过参数<code>-D prefix=xxx</code> 指定一个别的路径，例如我上面提供的编译参数指定的路径为<code>/root/mesa</code>。</li></ul></li><li><code>MESA_VK_WSI_DEBUG</code> 最开始alex研究turnip+dxvk的时候，就要将这个变量的值设为<code>sw</code>才能正常使用vulkan。后来好像xmem写了一个补丁，可以不用这个参数也能正常运行。我把这个给忘了，结果白折腾好几天。</li></ul><p>然后确保x11环境正常，能正常打开x11应用。（启动termux-x11，导出环境变量DISPLAY=:n）。</p><p>安装测试工具<code>apt install vulkan-tools</code></p><p>运行<code>vulkaninfo</code>，应该会正常输出一堆信息。</p><p>运行<code>vkcube</code>，应该会正常显示图形画面。</p><h2 id="_2-在不同平台上进行编译" tabindex="-1"><a class="header-anchor" href="#_2-在不同平台上进行编译"><span>2 在不同平台上进行编译</span></a></h2><h3 id="_2-1-x86-64电脑" tabindex="-1"><a class="header-anchor" href="#_2-1-x86-64电脑"><span>2.1 x86_64电脑</span></a></h3><p>正好有一台装了ubuntu22的笔记本。拿来编译x86_64的turnip，没啥问题。但是想要编译手机上用的（proot环境），就得编译arm64架构的。</p><p>虽然meson支持交叉编译，但是那个配置文件我是在搞不明白。所以干脆用arm64的rootfs，qemu提供转译支持就行了。这样相当于本地编译，缺点是速度奇慢。</p><p>借助docker来完成。</p><ol><li>新建一个空文件夹作为工作目录，进入。</li><li>下载<a href="https://gitlab.freedesktop.org/mesa/mesa/-/tags" target="_blank" rel="noopener noreferrer">mesa源码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，解压，并将文件夹重命名为<code>mesa</code>。进入mesa文件夹后应该存在<code>meson_options.txt</code>。</li><li>创建<code>Dockerfile</code>文件。内容如下<div class="language-Dockerfile line-numbers-mode" data-highlighter="prismjs" data-ext="Dockerfile" data-title="Dockerfile"><pre><code><span class="line">FROM arm64v8/ubuntu:24.04 As dev-image</span>
<span class="line">WORKDIR /root</span>
<span class="line"># 为了能apt build-dep需要添加deb-src。不确定security添加了src会不会有问题，但也不知道怎么排除。</span>
<span class="line">RUN sed -i &#39;s/Types: deb/Types:deb deb-src/g&#39; /etc/apt/sources.list.d/ubuntu.sources \</span>
<span class="line">&amp;&amp; apt update \</span>
<span class="line">&amp;&amp; apt-get build-dep mesa -y \</span>
<span class="line">&amp;&amp; apt install -y cbindgen python3-certifi python3-pycparser</span>
<span class="line"># mesa源码</span>
<span class="line">COPY mesa mesa-source</span>
<span class="line"># 配置构建目录。手动复制drm头文件</span>
<span class="line">RUN cp -r /usr/include/drm/* /usr/include \</span>
<span class="line">&amp;&amp; cd mesa-source \</span>
<span class="line">&amp;&amp; meson setup build-turnip/ \</span>
<span class="line">-D prefix=/root/mesa \</span>
<span class="line">-D buildtype=release \</span>
<span class="line">-D dri3=enabled \</span>
<span class="line">-D platforms=x11 \</span>
<span class="line">-D gallium-drivers=freedreno \</span>
<span class="line">-D vulkan-drivers=freedreno \</span>
<span class="line">-D freedreno-kmds=kgsl \</span>
<span class="line">-D opengl=false \</span>
<span class="line">-D glx=disabled \</span>
<span class="line">-D osmesa=false \</span>
<span class="line">-D egl=disabled \</span>
<span class="line">-D gles1=disabled \</span>
<span class="line">-D gles2=disabled \</span>
<span class="line">-D glvnd=false \</span>
<span class="line">-D libunwind=disabled \</span>
<span class="line">-D shared-glapi=disabled \</span>
<span class="line">-D microsoft-clc=disabled \</span>
<span class="line">-D valgrind=disabled \</span>
<span class="line"># 开始编译</span>
<span class="line">&amp;&amp; ninja -C build-turnip/ \</span>
<span class="line"># 编译好后安装，收尾工作（例如创建符号链接）</span>
<span class="line">&amp;&amp; ninja -C build-turnip/ install</span>
<span class="line"></span>
<span class="line"># 导出编译后的文件</span>
<span class="line">FROM scratch AS out-image</span>
<span class="line">COPY --from=dev-image /root/mesa /root/mesa</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>稍微解释一下 <ul><li><code>FROM arm64v8/ubuntu:24.04</code> 指定基础镜像。这个是官方提供的，可以在hub上找到：https://hub.docker.com/r/arm64v8/ubuntu/</li><li><code>sed -i &#39;s/Types: deb/Types:deb deb-src/g&#39; /etc/apt/sources.list.d/ubuntu.sources</code> 由于需要<code>apt build-dep</code>下载构建时依赖，所以需要修改apt源，在原有<code>deb</code>基础上添加<code>deb-src</code>。ubuntu24改了apt源的文件和语法要注意下。</li><li>然后就是常规的安装依赖，复制mesa源码到镜像内，开始构建。由于部分旧版本会有无法找到drm头文件的问题，所以手动复制一下。</li><li><code>FROM scratch AS out-image</code> scratch表示一个空的镜像，什么都没有。<code>As</code>后为该镜像的别名。由于我想在构建后自动导出文件，所以需要在<code>docker build</code>命令加上参数<code>--output</code>，但该参数只能导出完整镜像，所以要另起一个阶段，仅把所需文件复制进去。</li><li><code>COPY --from=dev-image /root/mesa /root/mesa</code> 将编译好的文件复制到空镜像中准备导出。<code>--from</code>指定了复制哪个镜像的文件。第一个路径是原镜像中位置，第二个是新镜像中位置。这里保留了目录结构，因为icd文件中要用到。</li></ul></li><li>启动qemu-static，注册binfmt。这样当所执行程序无法本地运行时，就会自动使用qemu来运行。<br><code>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code></li><li>开始docker构建阶段。<br><code>docker build --output type=tar,dest=mesa-turnip.tar --target=out-image .</code><ul><li><code>--output</code> 指定构建结束后，导出镜像到指定路径，而非保存为docker的普通镜像。</li><li><code>type</code>可以指定local或tar，tar就是打包成一个文件，默认是local。</li><li><code>dest</code>是在宿主机中的路径。这里存为当前目录下的<code>mesa-turnip.tar</code>。</li><li><code>--target</code>指定要导出哪个阶段的镜像。指定的名称为Dockerfile中<code>AS</code>设置的别名。</li></ul></li></ol><p>经过三个小时（docker提示是11382s），终于构建完成。</p><h3 id="_2-2-termux-proot" tabindex="-1"><a class="header-anchor" href="#_2-2-termux-proot"><span>2.2 termux proot</span></a></h3><p>借助proot-distro安装ubuntu24</p><p>由于手机本身就是arm架构，所以不用交叉编译了，终于不用忍受慢吞吞的qemu。</p><p>编译流程还是和在电脑上一样的。参考Dockerfile中RUN的内容即可。</p><div class="custom-container info"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">INFO</p><p>最好环境变量PATH里去掉termux的bin路径，否则一些程序可能会调用成termux而非proot内linux的，如llvm。</p></div><h3 id="_2-3-github-action" tabindex="-1"><a class="header-anchor" href="#_2-3-github-action"><span>2.3 github action</span></a></h3><p>本地空间比较紧张，不如让github来代劳。</p><p>github运行的系统也是x86架构的。所以还是和电脑上编译一个思路，用docker+qemu运行arm的镜像。docker提供了一个<a href="https://github.com/docker/setup-qemu-action" target="_blank" rel="noopener noreferrer">action<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，可以用来开启qemu支持。</p><p>可以在workflow_dispatch中开启inputs，以便自定义输入内容。可以用来灵活设置mesa版本号。</p><ol><li><p>在仓库内新建<code>mesa-turnip/Dockerfile-linux-arm64</code>文件，内容就是上面电脑编译时的<code>Dockerfile</code>的内容。</p></li><li><p>新建workflow文件并运行，等待完成即可。</p></li></ol><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">name</span><span class="token punctuation">:</span> turnip驱动</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">on</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">inputs</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">mesa-version</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">          e.g. mesa-24.1.1  </span>
<span class="line">          https://gitlab.freedesktop.org/mesa/mesa/-/tags</span></span>
<span class="line">        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token string">&#39;mesa-23.2.1&#39;</span></span>
<span class="line">        <span class="token key atrule">type</span><span class="token punctuation">:</span> string</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">linux-arm64</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">24.04</span></span>
<span class="line">    <span class="token key atrule">steps</span><span class="token punctuation">:</span></span>
<span class="line">    </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 克隆仓库</span>
<span class="line">      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4</span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 重命名Dockerfile</span>
<span class="line">      <span class="token key atrule">run</span><span class="token punctuation">:</span> mv mesa<span class="token punctuation">-</span>turnip/Dockerfile<span class="token punctuation">-</span>linux<span class="token punctuation">-</span>arm64 Dockerfile</span>
<span class="line">      </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 下载mesa源码</span>
<span class="line">      <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">        wget https://gitlab.freedesktop.org/mesa/mesa/-/archive/${{ inputs.mesa-version }}/mesa-${{ inputs.mesa-version }}.tar.gz</span>
<span class="line">        tar xf mesa-${{ inputs.mesa-version }}.tar.gz</span>
<span class="line">        mv mesa-${{ inputs.mesa-version }} mesa</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 使用action设置docker qemu <span class="token comment">#（不需要自己手动放qemu了）</span></span>
<span class="line">      <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>qemu<span class="token punctuation">-</span>action@v3</span>
<span class="line">      </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> docker开始构建</span>
<span class="line">      <span class="token key atrule">run</span><span class="token punctuation">:</span> docker build <span class="token punctuation">-</span><span class="token punctuation">-</span>output type=tar<span class="token punctuation">,</span>dest=mesa<span class="token punctuation">-</span>turnip.tar <span class="token punctuation">-</span><span class="token punctuation">-</span>target=out<span class="token punctuation">-</span>image .</span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 上传artifact</span>
<span class="line">      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v4.3.3</span>
<span class="line">      <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">name</span><span class="token punctuation">:</span> turnip<span class="token punctuation">-</span>linux<span class="token punctuation">-</span>arm64<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> inputs.mesa<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token key atrule">path</span><span class="token punctuation">:</span> mesa<span class="token punctuation">-</span>turnip.tar</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Last Updated 2/20/2025, 12:08:10 PM<!--]--></span></span></div></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#前言" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="前言"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->前言<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_1-编译流程与结果测试" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1 编译流程与结果测试"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1 编译流程与结果测试<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_1-1-meson构建系统" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1.1 meson构建系统"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1.1 meson构建系统<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_1-2-turnip编译参数" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1.2 turnip编译参数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1.2 turnip编译参数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_1-3-编译成功后测试vulkan" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1.3 编译成功后测试vulkan"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1.3 编译成功后测试vulkan<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_2-在不同平台上进行编译" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2 在不同平台上进行编译"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2 在不同平台上进行编译<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_2-1-x86-64电脑" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1 x86_64电脑"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.1 x86_64电脑<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_2-2-termux-proot" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2 termux proot"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.2 termux proot<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2024/06/08-mesa3d-turnip-linux_arm64/#_2-3-github-action" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.3 github action"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.3 github action<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-lSJJfXGm.js" defer></script>
  </body>
</html>
