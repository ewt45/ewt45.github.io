<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>使用vue3 + h5 canvas 绘制2d图片和文字 | 博客</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-BnPP2NeH.css" as="style"><link rel="stylesheet" href="/assets/style-BnPP2NeH.css">
    <link rel="modulepreload" href="/assets/app-lSJJfXGm.js"><link rel="modulepreload" href="/assets/index.html-xfauZgFa.js">
    <link rel="prefetch" href="/assets/timeline.html-BAvVtoBI.js" as="script"><link rel="prefetch" href="/assets/posts.html-BDe9RmJC.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-5V_0ldeR.js" as="script"><link rel="prefetch" href="/assets/1.html-yy2yFytV.js" as="script"><link rel="prefetch" href="/assets/1.html-nTxjU1Bc.js" as="script"><link rel="prefetch" href="/assets/2.html-DZ-3w1VZ.js" as="script"><link rel="prefetch" href="/assets/3.html-DZ3bEvhb.js" as="script"><link rel="prefetch" href="/assets/1.html-ZRhaUqLX.js" as="script"><link rel="prefetch" href="/assets/1.html-Dw8_-m24.js" as="script"><link rel="prefetch" href="/assets/1.html-D2p--ZRn.js" as="script"><link rel="prefetch" href="/assets/1.html-BKcCMUG3.js" as="script"><link rel="prefetch" href="/assets/1.html-C6pQh-RC.js" as="script"><link rel="prefetch" href="/assets/1.html-CYKCRyI3.js" as="script"><link rel="prefetch" href="/assets/2.html-DJbJUUuj.js" as="script"><link rel="prefetch" href="/assets/1.html-B6B-juSh.js" as="script"><link rel="prefetch" href="/assets/1.html-v9pKxjgF.js" as="script"><link rel="prefetch" href="/assets/1.html-De7IlD7i.js" as="script"><link rel="prefetch" href="/assets/1.html-CHE8FBaR.js" as="script"><link rel="prefetch" href="/assets/1.html-RqMXOz5Q.js" as="script"><link rel="prefetch" href="/assets/1.html-Dof7uOmY.js" as="script"><link rel="prefetch" href="/assets/1.html-C5tNz7tA.js" as="script"><link rel="prefetch" href="/assets/1.html-CNMa2M-d.js" as="script"><link rel="prefetch" href="/assets/1.html-BoJFA7la.js" as="script"><link rel="prefetch" href="/assets/1.html-DK6IPxzw.js" as="script"><link rel="prefetch" href="/assets/1.html-BXhANdLw.js" as="script"><link rel="prefetch" href="/assets/1.html-BmUrsBLW.js" as="script"><link rel="prefetch" href="/assets/1.html-DNaqT86r.js" as="script"><link rel="prefetch" href="/assets/1.html-Dl0GJ-jH.js" as="script"><link rel="prefetch" href="/assets/1.html-yCcpQztl.js" as="script"><link rel="prefetch" href="/assets/1.html-DBv1IOaq.js" as="script"><link rel="prefetch" href="/assets/1.html-C0Zwxfqb.js" as="script"><link rel="prefetch" href="/assets/1.html-iVIhowxE.js" as="script"><link rel="prefetch" href="/assets/1.html-Bcnqkk_9.js" as="script"><link rel="prefetch" href="/assets/1.html-CYVqutMM.js" as="script"><link rel="prefetch" href="/assets/1.html-SDgp3aOs.js" as="script"><link rel="prefetch" href="/assets/1.html-B38hZpmE.js" as="script"><link rel="prefetch" href="/assets/1.html-C9q0qIEw.js" as="script"><link rel="prefetch" href="/assets/1.html-Bg9Js69h.js" as="script"><link rel="prefetch" href="/assets/2.html-eRtQpz5X.js" as="script"><link rel="prefetch" href="/assets/1.html-Dv_I2idE.js" as="script"><link rel="prefetch" href="/assets/1.html-Dn6C90gc.js" as="script"><link rel="prefetch" href="/assets/1.html-y1hVWCcl.js" as="script"><link rel="prefetch" href="/assets/1.html-BSQiaV1J.js" as="script"><link rel="prefetch" href="/assets/1.html-DXi2vSUl.js" as="script"><link rel="prefetch" href="/assets/1.html-Jgq6TbQK.js" as="script"><link rel="prefetch" href="/assets/1.html-CURNMHjC.js" as="script"><link rel="prefetch" href="/assets/1.html-CUfabN0R.js" as="script"><link rel="prefetch" href="/assets/1.html-ChhkJBFb.js" as="script"><link rel="prefetch" href="/assets/1.html-y8Il0XMP.js" as="script"><link rel="prefetch" href="/assets/1.html-CXBcIIjb.js" as="script"><link rel="prefetch" href="/assets/1.html-DEYIk8-q.js" as="script"><link rel="prefetch" href="/assets/1.html-CUB-76jf.js" as="script"><link rel="prefetch" href="/assets/1.html-BR-vtOCm.js" as="script"><link rel="prefetch" href="/assets/1.html-Di6IvUbD.js" as="script"><link rel="prefetch" href="/assets/1.html-iKeLMEA1.js" as="script"><link rel="prefetch" href="/assets/1.html-B23WFga2.js" as="script"><link rel="prefetch" href="/assets/1.html-DBAywDxx.js" as="script"><link rel="prefetch" href="/assets/1.html-C7gBBOTt.js" as="script"><link rel="prefetch" href="/assets/1.html-DtTuhNez.js" as="script"><link rel="prefetch" href="/assets/1.html-CjbxeMTY.js" as="script"><link rel="prefetch" href="/assets/1.html-VedXetm4.js" as="script"><link rel="prefetch" href="/assets/1.html-C7vkUq9U.js" as="script"><link rel="prefetch" href="/assets/1.html-CKoDS6cD.js" as="script"><link rel="prefetch" href="/assets/1.html-D2AjppoH.js" as="script"><link rel="prefetch" href="/assets/1.html-D6uas5Q5.js" as="script"><link rel="prefetch" href="/assets/1.html-DZaxw3Vt.js" as="script"><link rel="prefetch" href="/assets/1.html-Ciw9aOQK.js" as="script"><link rel="prefetch" href="/assets/2.html-Czvu1qhK.js" as="script"><link rel="prefetch" href="/assets/1.html-BL1u0BXg.js" as="script"><link rel="prefetch" href="/assets/1.html-DOrS_H42.js" as="script"><link rel="prefetch" href="/assets/1.html-D_-YFshT.js" as="script"><link rel="prefetch" href="/assets/1.html-C7oQNTeb.js" as="script"><link rel="prefetch" href="/assets/1.html-D6q7O-YE.js" as="script"><link rel="prefetch" href="/assets/1.html-BKtgxFao.js" as="script"><link rel="prefetch" href="/assets/1.html-ChHfA7Ub.js" as="script"><link rel="prefetch" href="/assets/1.html-BYmHK36B.js" as="script"><link rel="prefetch" href="/assets/1.html-kA591iPl.js" as="script"><link rel="prefetch" href="/assets/1.html-B6Z9JHUx.js" as="script"><link rel="prefetch" href="/assets/1.html-DeW5UuLV.js" as="script"><link rel="prefetch" href="/assets/1.html-Ly1Izu-z.js" as="script"><link rel="prefetch" href="/assets/1.html-D0dXHV11.js" as="script"><link rel="prefetch" href="/assets/1.html-CZ6hGlzj.js" as="script"><link rel="prefetch" href="/assets/1.html-CSl7qz7_.js" as="script"><link rel="prefetch" href="/assets/1.html-hoorisB2.js" as="script"><link rel="prefetch" href="/assets/1.html-DfMmJBkA.js" as="script"><link rel="prefetch" href="/assets/1.html-CvjQlPb-.js" as="script"><link rel="prefetch" href="/assets/1.html-mMwmaqNv.js" as="script"><link rel="prefetch" href="/assets/1.html-BbZEnfuL.js" as="script"><link rel="prefetch" href="/assets/1.html-DMy9vnUO.js" as="script"><link rel="prefetch" href="/assets/1.html-CaB-TTNA.js" as="script"><link rel="prefetch" href="/assets/1.html-DTTqmB1M.js" as="script"><link rel="prefetch" href="/assets/1.html-DG0Ri2-3.js" as="script"><link rel="prefetch" href="/assets/1.html-CbdOtFX6.js" as="script"><link rel="prefetch" href="/assets/1.html-BPggE-vd.js" as="script"><link rel="prefetch" href="/assets/1.html-HSH3YtDr.js" as="script"><link rel="prefetch" href="/assets/1.html-CblnYoQH.js" as="script"><link rel="prefetch" href="/assets/1.html-DW3jzJmF.js" as="script"><link rel="prefetch" href="/assets/1.html-EbscoznH.js" as="script"><link rel="prefetch" href="/assets/1.html-BVzHmXLV.js" as="script"><link rel="prefetch" href="/assets/1.html-ks4RjumV.js" as="script"><link rel="prefetch" href="/assets/1.html-BH1KfGMl.js" as="script"><link rel="prefetch" href="/assets/1.html-zPiztlwQ.js" as="script"><link rel="prefetch" href="/assets/1.html-DbQUkwnm.js" as="script"><link rel="prefetch" href="/assets/1.html-lC7lLhGV.js" as="script"><link rel="prefetch" href="/assets/1.html-CLYr7dtL.js" as="script"><link rel="prefetch" href="/assets/1.html-ojawvUMc.js" as="script"><link rel="prefetch" href="/assets/1.html-BZEAgw8b.js" as="script"><link rel="prefetch" href="/assets/1.html-DYCe7dPb.js" as="script"><link rel="prefetch" href="/assets/1.html-DTn0dGU2.js" as="script"><link rel="prefetch" href="/assets/1.html--B2a8o7V.js" as="script"><link rel="prefetch" href="/assets/1.html-7Ua1aPJo.js" as="script"><link rel="prefetch" href="/assets/1.html-Gj4i9rQj.js" as="script"><link rel="prefetch" href="/assets/1.html-BoZMEBVy.js" as="script"><link rel="prefetch" href="/assets/1.html-XU3T-WYT.js" as="script"><link rel="prefetch" href="/assets/1.html-D1V-fulj.js" as="script"><link rel="prefetch" href="/assets/1.html-pymXCC7r.js" as="script"><link rel="prefetch" href="/assets/2.html-Ubr6swgl.js" as="script"><link rel="prefetch" href="/assets/3.html-CjLKwczA.js" as="script"><link rel="prefetch" href="/assets/4.html-CZDmeODS.js" as="script"><link rel="prefetch" href="/assets/5.html-CvM0EXix.js" as="script"><link rel="prefetch" href="/assets/index.html-BBKCb86C.js" as="script"><link rel="prefetch" href="/assets/index.html-Cy-Y6qO0.js" as="script"><link rel="prefetch" href="/assets/index.html--IG5pKEw.js" as="script"><link rel="prefetch" href="/assets/index.html-D_zAtQ3A.js" as="script"><link rel="prefetch" href="/assets/index.html-QY7s6tas.js" as="script"><link rel="prefetch" href="/assets/index.html-DDwaHnCa.js" as="script"><link rel="prefetch" href="/assets/index.html-DgszJxPY.js" as="script"><link rel="prefetch" href="/assets/deprecated.html-CRMXFzvC.js" as="script"><link rel="prefetch" href="/assets/index.html-Rc_VX8bK.js" as="script"><link rel="prefetch" href="/assets/index_EN.html-ByFpT8Si.js" as="script"><link rel="prefetch" href="/assets/index.html-BuF_ye6e.js" as="script"><link rel="prefetch" href="/assets/index.html-DWAaArns.js" as="script"><link rel="prefetch" href="/assets/index.html-CqZrKvZ4.js" as="script"><link rel="prefetch" href="/assets/index.html-BdQrDGCb.js" as="script"><link rel="prefetch" href="/assets/index.html-DfEreS3A.js" as="script"><link rel="prefetch" href="/assets/index.html-CPq8pEd4.js" as="script"><link rel="prefetch" href="/assets/index.html-QR87e8Ls.js" as="script"><link rel="prefetch" href="/assets/detailed.html-CYf3qOPR.js" as="script"><link rel="prefetch" href="/assets/index.html-CQq5mgbv.js" as="script"><link rel="prefetch" href="/assets/index.html-BMQ4-iAy.js" as="script"><link rel="prefetch" href="/assets/index.html-B679GBm9.js" as="script"><link rel="prefetch" href="/assets/index.html-CCrvZbLJ.js" as="script"><link rel="prefetch" href="/assets/driveD.html-CcD-EJvX.js" as="script"><link rel="prefetch" href="/assets/index.html-BQuueml5.js" as="script"><link rel="prefetch" href="/assets/index.html-gEKDxyu6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bhz11Ob5.js" as="script"><link rel="prefetch" href="/assets/index.html-BkeY5tbW.js" as="script"><link rel="prefetch" href="/assets/index.html-Bvnzpb-9.js" as="script"><link rel="prefetch" href="/assets/index.html-DCAyTCDU.js" as="script"><link rel="prefetch" href="/assets/index.html-DD-LFEVB.js" as="script"><link rel="prefetch" href="/assets/index.html-DkAhnggS.js" as="script"><link rel="prefetch" href="/assets/index.html-DFxQCUU9.js" as="script"><link rel="prefetch" href="/assets/index.html-9VL9SfQK.js" as="script"><link rel="prefetch" href="/assets/index.html-BlTTay7L.js" as="script"><link rel="prefetch" href="/assets/index.html-t5GXM772.js" as="script"><link rel="prefetch" href="/assets/index.html-CSlhuypt.js" as="script"><link rel="prefetch" href="/assets/index.html-C5jNpAm8.js" as="script"><link rel="prefetch" href="/assets/index.html-DjJMF_aD.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgv5WEvh.js" as="script"><link rel="prefetch" href="/assets/index.html-DBOL5oAg.js" as="script"><link rel="prefetch" href="/assets/index.html-CyMED2UU.js" as="script"><link rel="prefetch" href="/assets/index.html-Brt8k1u9.js" as="script"><link rel="prefetch" href="/assets/index.html-DTKB9h7D.js" as="script"><link rel="prefetch" href="/assets/index_en.html-BXYBFagB.js" as="script"><link rel="prefetch" href="/assets/index.html-C3TPFGWv.js" as="script"><link rel="prefetch" href="/assets/index.html-BEi31oBx.js" as="script"><link rel="prefetch" href="/assets/index.html-DQMJgohn.js" as="script"><link rel="prefetch" href="/assets/index.html-oa6BlAsi.js" as="script"><link rel="prefetch" href="/assets/index.html-C22QzVzY.js" as="script"><link rel="prefetch" href="/assets/index.html-DoJ7ZtnH.js" as="script"><link rel="prefetch" href="/assets/index.html-BGBq_6tl.js" as="script"><link rel="prefetch" href="/assets/index.html-De0w7Z4M.js" as="script"><link rel="prefetch" href="/assets/index.html-DPCBOMd7.js" as="script"><link rel="prefetch" href="/assets/404.html-BfWx50pL.js" as="script"><link rel="prefetch" href="/assets/Valine.min-Bnm5pcBZ.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-DWEKOTfS.js" as="script"><link rel="prefetch" href="/assets/PokopeaMain-MDrkiEMa.js" as="script"><link rel="prefetch" href="/assets/example-CYQHARbw.js" as="script"><link rel="prefetch" href="/assets/main-BTkXXdD8.js" as="script"><link rel="prefetch" href="/assets/ActionBili-Czh0m-6-.js" as="script"><link rel="prefetch" href="/assets/ActionDialog-CVwUbXiR.js" as="script"><link rel="prefetch" href="/assets/ActionInfo-B23WMb5r.js" as="script"><link rel="prefetch" href="/assets/ActionSub-Pfdqagrq.js" as="script"><link rel="prefetch" href="/assets/ActionYt-CrnOPkTb.js" as="script"><link rel="prefetch" href="/assets/IconBili-CMtoYxHz.js" as="script"><link rel="prefetch" href="/assets/IconInfo-D1wXkJcd.js" as="script"><link rel="prefetch" href="/assets/IconSub-D5TM9A67.js" as="script"><link rel="prefetch" href="/assets/IconYt-D_vP9lhp.js" as="script"><link rel="prefetch" href="/assets/ToolDarkMode-9w8ghlWD.js" as="script"><link rel="prefetch" href="/assets/ToolFilter-B32drc-T.js" as="script"><link rel="prefetch" href="/assets/ToolInfoLink-DOCFQvn0.js" as="script"><link rel="prefetch" href="/assets/ToolMenus-yA0GO2Nj.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-DfZWbE-_.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><!----><a href="/" class="site-name">博客</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><IconHome class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"></IconHome><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">使用vue3 + h5 canvas 绘制2d图片和文字</h1><div class="page-info"><!----><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2022-08-09 16:58<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/categories/jishu/1.html" class="">技术</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/tags/tupianchuli/1.html" class="">图片处理</a><a href="/tags/bilibili/1.html" class="">哔哩哔哩</a><a href="/tags/canvas/1.html" class="">canvas</a><a href="/tags/vue/1.html" class="">vue</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>canvas操作需要新建一个画布，然后在js中获取context进行绘制。 canvas的使用方法主要参考的教程是mdn上的 https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D 。 前端框架用的vue3。</p><h2 id="基础使用" tabindex="-1"><a class="header-anchor" href="#基础使用"><span>基础使用</span></a></h2><p>在html中添加画布,js通过ref获取画布实例，获取context进行绘制。canvas必须要指定width和height属性。<br> js通过ref获取实例，<code>ref&lt;HTMLCanvasElement&gt;()</code>是typescript的写法，规定传入的是HTMLCanvasElement，方便之后调用此接口的属性和方法。使用nextTick防止还有html元素没加载完。getContext(&#39;2d&#39;)获取context，用fillRect填充一个矩形，先提前指定填充样式为黑色。</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->html<!--]--></span></span></button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->js<!--]--></span></span></button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span></span>
<span class="line">    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span> <span class="token property">border-width</span><span class="token punctuation">:</span> 1px</span><span class="token punctuation">&quot;</span></span></span></span>
<span class="line">    <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvasRef<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token punctuation">&gt;</span></span></span>
<span class="line">    浏览器不支持canvas</span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>nextTick<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">const</span> canvasRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLCanvasElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>canvasRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvasRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">&#39;black&#39;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>效果如下图<br><img src="data:image/png;base64,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" alt="图1"></p><h2 id="填充与描边" tabindex="-1"><a class="header-anchor" href="#填充与描边"><span>填充与描边</span></a></h2><h3 id="填充" tabindex="-1"><a class="header-anchor" href="#填充"><span>填充</span></a></h3><p>填充是跟fill相关的</p><ul><li><p>fillRect()就是填充绘制一个矩形。</p></li><li><p>fillText()是填充绘制文字。可以设置对齐方式和基线。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">text</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ctx</span><span class="token operator">:</span> CanvasRenderingContext2D</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;bold 30px HarmonyOS Sans SC&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>textAlign<span class="token operator">=</span><span class="token string">&#39;end&#39;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>textBaseline<span class="token operator">=</span><span class="token string">&#39;hanging&#39;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#234554&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">&quot;文本1&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下图 <img src="data:image/png;base64,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" alt="图3"></p></li><li><p>fill()是填充当前画布中全部路径构成的形状，如果路径未封闭那么先将其封闭。<br> 由于fill()会首先自动调用closePath()连接当前所有未闭合的路径，可能导致意外的结果，如下图，<br><img src="data:image/png;base64,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" alt="图2"> 绘制一个圆形并填充为蓝色，但是由于之前绘制的黑色路径未封闭，所以折线与圆形连到了一起。解决方法是先调用一次beginPath()清空当前子路径列表。</p></li><li><p>fillStyle，在填充前设置，填充的样式，可以是颜色，也可以是渐变等属性。下图为填充矩形为黑色的渐变透明。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">gradientRect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ctx</span><span class="token operator">:</span> CanvasRenderingContext2D</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">let</span> gradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;#00000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABZhJREFUeF7t1UmKw0AUBcHS/W/sAYzAW6OSQOVcRINXLQ/8IHnb8Fe7wGuM8Zx4PSae2T/nX8+9a4e98nu2K2/ynlsvIJBbz3vuwwVy7l4rnhbIiitPfodAJg+18DGBLDz20VcJ5OhC6/8vkPU3//mNAglhfH+KQEImAglhCKSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmQgkhGFBehgC6ZlYkJCJQEIYFqSHIZCeiQUJmXwAiIoTEhl0qUsAAAAASUVORK5CYII=" alt="图4"></p></li></ul><h3 id="描边" tabindex="-1"><a class="header-anchor" href="#描边"><span>描边</span></a></h3><p>描边是和stroke相关的.</p><ul><li>strokeRect为画一个矩形的边框。</li><li>strokeText为绘制文本的边框，但是为文字描边还是有点勉强，文字描边不如直接在底层偏移一下，多fill几次，这样能在保证文字原有粗细的情况下自由调节边框宽度，效果如下图。<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//...</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;bold 30px HarmonyOS Sans SC&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">drawTextBorder</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">&quot;文本1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">&quot;文本1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//绘制边框</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">drawTextBorder</span> <span class="token operator">=</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token parameter"><span class="token literal-property property">ctx</span><span class="token operator">:</span> CanvasRenderingContext2D<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">str</span><span class="token operator">:</span> string<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">x</span><span class="token operator">:</span> number<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">y</span><span class="token operator">:</span> number<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">size</span><span class="token operator">:</span> number</span></span>
<span class="line">    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;aqua&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//移动填充吧</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> offx <span class="token operator">=</span> <span class="token operator">-</span>size<span class="token punctuation">;</span> offx <span class="token operator">&lt;=</span> size<span class="token punctuation">;</span> offx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> offy <span class="token operator">=</span> <span class="token operator">-</span>size<span class="token punctuation">;</span> offy <span class="token operator">&lt;=</span> size<span class="token punctuation">;</span> offy<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> x <span class="token operator">+</span> offx<span class="token punctuation">,</span> y <span class="token operator">+</span> offy<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/assets/5-DLEhIswy.png" alt="图5"></li><li>strokeStyle与fill的同理。</li><li>stroke 如果使用路径绘制，只有在最后调用stroke() 路径才会被绘制出来</li></ul><h2 id="绘制图片" tabindex="-1"><a class="header-anchor" href="#绘制图片"><span>绘制图片</span></a></h2><p>可以使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ImageData" target="_blank" rel="noopener noreferrer">imagedata<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，rgba数组的形式，也可以用html的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement/Image" target="_blank" rel="noopener noreferrer">Image<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>引入现有图片。这里对Image的使用进行简单介绍。</p><p>Image就是html img标签的js形式，用法参考img标签就行，主要设置src图片地址，可能要考虑跨域等问题。</p><h3 id="获取本地上传图片" tabindex="-1"><a class="header-anchor" href="#获取本地上传图片"><span>获取本地上传图片</span></a></h3><ul><li>上传图片用到了element-plus的el-upload组件。上传图片后，通过<code>URL.createObjectURL()</code>获取url。<div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->html<!--]--></span></span></button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->js<!--]--></span></span></button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-upload</span> <span class="token attr-name">:before-upload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleMainImgUpload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span><span class="token punctuation">&gt;</span></span>选择封面图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-upload</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> mainImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">handleMainImgUpload</span><span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">&quot;beforeUpload&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">mainImg<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div></li></ul><h3 id="引用外部地址图片" tabindex="-1"><a class="header-anchor" href="#引用外部地址图片"><span>引用外部地址图片</span></a></h3><ul><li>我的需求是引用b站视频的封面。首先要调用api获取视频相关的信息，因为axois没法发送跨域请求，iframe也没法跨域获取其中内容，所以使用jsonp，安装第三方依赖vue-jsonp,在发送的请求后加上参数<code>{jsonp:jsonp&#39;}</code>就行了。</li><li>获取到封面地址后，和本地图片一样，将地址赋值给subImg.src。这样浏览器会自动发送请求获取图片，</li><li>外部链接存在跨域问题，导致请求回复403。可以通过设置图片请求不携带referrer解决：<code>subImg.referrerPolicy = &quot;no-referrer&quot;;</code>。</li><li>绘制到画布上，在画布将其内容导出为png图片时还会遇到跨域问题而无法导出，通过设置crossOrigin解决<code>subImg.crossOrigin = &quot;Anonymous&quot;;</code>。<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> subImg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    subImg<span class="token punctuation">.</span>referrerPolicy <span class="token operator">=</span> <span class="token string">&quot;no-referrer&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    subImg<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">&quot;Anonymous&quot;</span><span class="token punctuation">;</span> </span>
<span class="line">    subImg<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> String</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">&quot;jsonp&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        subImg<span class="token punctuation">.</span>src <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>cover<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="将图片绘制到画布上" tabindex="-1"><a class="header-anchor" href="#将图片绘制到画布上"><span>将图片绘制到画布上</span></a></h3><p>绘制图片使用ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);<br> 设置图片的src后，图片加载完需要一定时间，所以需要等待图片加载完后再进行绘制。应在img.onload中调用drawImage()</p><ul><li>image-图像资源，即上面获取到的本地或外部图片</li><li>sx，sy，sWidth，sHeight-用于裁切图片，分别是裁切起点和裁切宽高，sx和sy可以是负数，相当于图片左侧和上方有透明区域。</li><li>dx，dy，dWidth，dHeight是在裁切下来的图片在画布上绘制的起点和宽高，dx，dy同样可以为负，dWidth，dHeight为负则会翻转图像。dWidth和dHeight如果不等于裁切宽高，则会在将图片画布上进行缩放。</li><li>sWidth和sHeight是按图片未经dWidth，dHeight缩放时算的。如果我有一张超出画布尺寸的图片，想通过缩放修改其在画布上的尺寸并保证能填满画布，<strong>那么裁切宽高应该/缩放倍率,缩放宽高应该等于缩放后的宽高</strong>。比如图片原尺寸1920*1080，我想裁切一块，并且将裁切的这块宽高*0.5后绘制到画布上，要求绘制到画布上的宽高均为100，那么我需要设置sWidth,sHeight为200，dWidth，dHeight为100。如图所示。<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">handleMainImgUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">file</span><span class="token operator">:</span> File</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    mainImg<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvasRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    mainImg<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>mainImg<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>mainImg<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/assets/6-DbbM6Idl.png" alt="图6"></li></ul><h3 id="将图片裁切至任意形状" tabindex="-1"><a class="header-anchor" href="#将图片裁切至任意形状"><span>将图片裁切至任意形状</span></a></h3><p>我们经常需要对图片进行裁切，使用drawImage裁切图片只能裁切矩形而且计算起来很麻烦，所以使用<code>globalCompositeOperation</code>或<code>clip()</code>来进行自定义裁切。 参考教程：https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Compositing</p><h4 id="使用图片叠加选项-globalcompositeoperation" tabindex="-1"><a class="header-anchor" href="#使用图片叠加选项-globalcompositeoperation"><span>使用图片叠加选项 globalCompositeOperation</span></a></h4><p>设置canvas全局的组合选项为source-atop，让新图片仅绘制在当前画布存在图案的区域。</p><ol><li>用fillRect()填满画布，使用path绘制需要的形状（比如圆角矩形）并填充，设置叠加选项为用source-in，画布内容只留下path填充的形状，其余为透明。</li><li>设置叠加选项为source-atop, 绘制图片，图片只会绘制在形状内部。如下图<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">drawRadiusRect</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-atop&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>mainImg<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-over&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">drawRadiusRect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ctx</span><span class="token operator">:</span> CanvasRenderingContext2D<span class="token punctuation">,</span> <span class="token literal-property property">stroke</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">+</span> radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">400</span> <span class="token operator">+</span> radius<span class="token punctuation">,</span>radius<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//画曲线，第一个坐标是直角的坐标，第二个是目标位置</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">+</span> radius<span class="token punctuation">,</span> <span class="token number">800</span> <span class="token operator">-</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">+</span> radius<span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-over&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span>fullWidth<span class="token punctuation">,</span> m<span class="token punctuation">.</span>fullHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-in&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">&quot;source-over&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/assets/7-J0L0diIA.png" alt="图7"></li></ol><h4 id="使用路径裁切-clip" tabindex="-1"><a class="header-anchor" href="#使用路径裁切-clip"><span>使用路径裁切 clip()</span></a></h4><p>clip一次只能设置一个区域，如果要裁切多个区域，需要先save()保存当前画布状态，clip完再restore()恢复原始状态。</p><ul><li>可以参考上面的mdn教程。</li></ul><h3 id="按顺序绘制多张图片" tabindex="-1"><a class="header-anchor" href="#按顺序绘制多张图片"><span>按顺序绘制多张图片</span></a></h3><ul><li>有时图片需要按顺序绘制，那么使用promise即可</li></ul><h2 id="绘制路径" tabindex="-1"><a class="header-anchor" href="#绘制路径"><span>绘制路径</span></a></h2><p>具体教程可以参考文章开头的mdn教程</p><ol><li>beginPath() 清空当前子路径列表，并开始新的绘制</li><li>moveTo() 准备在哪个坐标开始画</li><li>lineTo() 画直线，从当前坐标到哪个坐标</li><li>quadraticCurveTo() 画曲线</li><li>closePath() 闭合当前全部路径</li><li>fill()/stroke() 将绘制路径填充/描边，只有调用此方法后，画布上才会真正显示图形</li></ol><h2 id="阴影" tabindex="-1"><a class="header-anchor" href="#阴影"><span>阴影</span></a></h2><p>canvas可以为绘制的图片或路径添加阴影，仅当shadowColor不为全透明时生效。可以设置的属性有shadowBlur，shadowColor，shadowOffsetX。shadowOffsetY。如下图<br><img src="/assets/8-2Jb-n3Jm.png" alt="图8"></p><h2 id="保存和恢复当前状态" tabindex="-1"><a class="header-anchor" href="#保存和恢复当前状态"><span>保存和恢复当前状态</span></a></h2><p>使用save()和restore()来保存当前的一些样式设置，样式已经设置会全局有效，所以在绘制一些图案时如果修改了样式，可能导致之后的绘制出错，此时可以在自定义绘制前调用save()保存原始状态，绘制后调用restore()恢复原始状态。如图，由于在其他函数里更改了fillStyle，导致想绘制的黑色矩形变为了蓝色。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvasRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> ctx <span class="token operator">=</span> canvasRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">//想绘制一个黑色矩形</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle<span class="token operator">=</span><span class="token string">&#39;black&#39;</span></span>
<span class="line">    <span class="token comment">//但是先做了一些其他操作</span></span>
<span class="line">    <span class="token function">someOption</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">someOption</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ctx</span><span class="token operator">:</span> CanvasRenderingContext2D</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ctx.save()</span></span>
<span class="line">    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&#39;blue&#39;</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// ctx.restore()</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABZZJREFUeF7t1kEKwzAQBEHt/x8tg8/2WQXqfCCLKkNn1tp79YFeYAY65vpTpoFov4EGIok0EEnjvaWBSCQNRNJoIJ5Gf7E0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinUUE0kwoiiVQQSaOCeBoVRDOpIJJIBZE0KoinwV10/UF7n3mCyvX17nMGo2/9f4EGIv06Goik8d7SQCSSBiJpNBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEdSQSSSBiJpVBBOo4FwJBVEImkgkkYF4TQaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBsKRdJD0Ag1E0ugW7gUaCEfSQdILNBBJo1u4F2ggHEkHSS/QQCSNbuFeoIFwJB0kvUADkTS6hXuBBx1GBNjdl/tbAAAAAElFTkSuQmCC" alt="图9"></p></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Last Updated 8/10/2022, 8:24:39 AM<!--]--></span></span></div></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#前言" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="前言"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->前言<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#基础使用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="基础使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基础使用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#填充与描边" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="填充与描边"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->填充与描边<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#填充" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="填充"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->填充<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#描边" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="描边"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->描边<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#绘制图片" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="绘制图片"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->绘制图片<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#获取本地上传图片" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="获取本地上传图片"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->获取本地上传图片<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#引用外部地址图片" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="引用外部地址图片"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->引用外部地址图片<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#将图片绘制到画布上" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="将图片绘制到画布上"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->将图片绘制到画布上<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#将图片裁切至任意形状" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="将图片裁切至任意形状"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->将图片裁切至任意形状<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/2022/summer/batchCover/#按顺序绘制多张图片" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="按顺序绘制多张图片"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->按顺序绘制多张图片<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#绘制路径" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="绘制路径"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->绘制路径<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#阴影" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="阴影"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->阴影<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/2022/summer/batchCover/#保存和恢复当前状态" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="保存和恢复当前状态"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->保存和恢复当前状态<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-lSJJfXGm.js" defer></script>
  </body>
</html>
